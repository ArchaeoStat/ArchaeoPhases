<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Allen's Interval Algebra • ArchaeoPhases</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Allen's Interval Algebra">
<meta name="robots" content="noindex">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ArchaeoPhases</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">2.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/ArchaeoPhases.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/import.html">Import MCMC Samples</a></li>
    <li><a class="dropdown-item" href="../articles/allen.html">Allen's interval algebra</a></li>
    <li><a class="dropdown-item" href="../articles/bibliography.html">Bibliography</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ArchaeoStat/ArchaeoPhases/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Allen's Interval Algebra</h1>
                        <h4 data-toc-skip class="author">T. S. Dye</h4>
            
            <h4 data-toc-skip class="date">2024-11-05</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ArchaeoStat/ArchaeoPhases/blob/master/vignettes/allen.Rmd" class="external-link"><code>vignettes/allen.Rmd</code></a></small>
      <div class="d-none name"><code>allen.Rmd</code></div>
    </div>

    
    
<p><strong>ArchaeoPhases</strong> provides facilities to compute Allen’s
interval algebra. This vignette provides an overview of the algebra and
illustrates how it might be used analytically and empirically, given
MCMC output from a Bayesian calibration.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Load ArchaeoPhases</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ArchaeoStat.github.io/ArchaeoPhases/">ArchaeoPhases</a></span><span class="op">)</span></span></code></pre></div>
<p>This vignette uses data available through the <a href="https://github.com/ArchaeoStat/ArchaeoData" class="external-link"><strong>ArchaeoData</strong></a>
package which is available in a <a href="https://archaeostat.r-universe.dev" class="external-link">separate repository</a>.
<strong>ArchaeoData</strong> provides MCMC outputs from ChronoModel,
OxCal and BCal.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Install data package</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"ArchaeoData"</span>, repos <span class="op">=</span> <span class="st">"https://archaeostat.r-universe.dev"</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="overview-of-allens-interval-algebra">Overview of Allen’s Interval Algebra<a class="anchor" aria-label="anchor" href="#overview-of-allens-interval-algebra"></a>
</h2>
<p>Allen’s interval algebra identifies 13 basic relations that are
distinct, exhaustive, and qualitative <span class="citation">(Allen
1983)</span>. The algebra is defined for definite intervals whose
endpoints are single values. It can also be used with indefinite
intervals whose endpoints are not single values.</p>
<p>It is conventional to express an Allen relation with a notation that
indicates two intervals and a set of relations. For example, given
definite intervals <em>A</em> and <em>B</em>, where <em>A</em> precedes
<em>B</em>, their Allen relation can be represented as <em>A(p)B</em>.
Given indefinite intervals <em>C</em> and <em>D</em>, where <em>C</em>
starts before <em>D</em> starts and ends before <em>D</em> ends, an
Allen relation that expresses this incomplete information is
<em>C(pmo)D</em>. Note that the Allen set (pmo) in the relation of
<em>C</em> and <em>D</em> is a superset of the Allen set (p) in the
relation of <em>A</em> and <em>B</em>. In this circumstance, when two
Allen sets are related as superset/subset, the relation indicated by the
superset is <em>weaker</em> and the relation indicated by the subset is
<em>stronger</em>. An Allen relation thus provides a precise vocabulary
for characterizing the state of knowledge about the relation between two
intervals, regardless of whether the intervals are definite or
indefinite.</p>
<table class="table">
<thead><tr class="header">
<th align="left"><strong>Relation</strong></th>
<th align="center"></th>
<th align="center"></th>
<th align="right"><strong>Converse</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">precedes</td>
<td align="center">(p)</td>
<td align="center">(P)</td>
<td align="right">preceded by</td>
</tr>
<tr class="even">
<td align="left">meets</td>
<td align="center">(m)</td>
<td align="center">(M)</td>
<td align="right">met by</td>
</tr>
<tr class="odd">
<td align="left">overlaps</td>
<td align="center">(o)</td>
<td align="center">(O)</td>
<td align="right">overlapped by</td>
</tr>
<tr class="even">
<td align="left">finished by</td>
<td align="center">(F)</td>
<td align="center">(f)</td>
<td align="right">finishes</td>
</tr>
<tr class="odd">
<td align="left">contains</td>
<td align="center">(D)</td>
<td align="center">(d)</td>
<td align="right">during</td>
</tr>
<tr class="even">
<td align="left">starts</td>
<td align="center">(s)</td>
<td align="center">(S)</td>
<td align="right">started by</td>
</tr>
<tr class="odd">
<td align="left">equals</td>
<td align="center">(e)</td>
<td align="center"></td>
<td align="right"></td>
</tr>
</tbody>
</table>
<p>It is often useful to visualize the basic Allen relations as a Nökel
lattice. In a Nökel lattice, the immediate neighbors of a relation
differ from it in the placement of a single interval end-point.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Plot the basic Allen relations</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/allen_illustrate.html">allen_illustrate</a></span><span class="op">(</span><span class="st">"basic"</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="figures%2Fbasic_relations-1.png" alt="plot of chunk basic_relations" width="100%"><p class="caption">
plot of chunk basic_relations
</p>
</div>
</div>
<div class="section level2">
<h2 id="analytic-inquiry-with-the-algebra">Analytic Inquiry with the Algebra<a class="anchor" aria-label="anchor" href="#analytic-inquiry-with-the-algebra"></a>
</h2>
<p>Interval algebra is carried out with a composition function that
returns the relation of two intervals given their relations to a common
third interval. As implemented here, the function expects the relation
of one interval to the common interval and the relation of the common
interval to the remaining interval. The function also accepts a title
for the resulting Nokel lattice.</p>
<p>In this example, the composition function deduces that the interval
represented by a context inferior to a reference context precedes the
interval represented by a context superior to the reference context.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Plot lattice for two contexts on the same line of a Harris matrix</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/allen_analyze.html">allen_analyze</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="st">"m"</span>,</span>
<span>  y <span class="op">=</span> <span class="st">"m"</span>,</span>
<span>  main <span class="op">=</span> <span class="st">"Composite relation of two contexts on the same line"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="figures%2Fanalyze_stratigraphy-1.png" alt="plot of chunk analyze_stratigraphy" width="100%"><p class="caption">
plot of chunk analyze_stratigraphy
</p>
</div>
<p>The same lattice can be created with a convenience function.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Illustrate composite relations in a stratigraphic sequence</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/allen_illustrate.html">allen_illustrate</a></span><span class="op">(</span><span class="st">"sequence"</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="figures%2Fillustrate_stratigraphy-1.png" alt="plot of chunk illustrate_stratigraphy" width="100%"><p class="caption">
plot of chunk illustrate_stratigraphy
</p>
</div>
</div>
<div class="section level2">
<h2 id="empirical-inquiry-with-the-algebra">Empirical Inquiry with the Algebra<a class="anchor" aria-label="anchor" href="#empirical-inquiry-with-the-algebra"></a>
</h2>
<p>Empirical inquiry with Allen’s interval algebra compares intervals
estimated by Bayesian calibration of age determinations from Anglo-Saxon
female burials.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Load the Anglo Saxon burials dataset</span></span>
<span><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"oxcal"</span>, <span class="st">"burials.csv"</span>, package <span class="op">=</span> <span class="st">"ArchaeoData"</span><span class="op">)</span></span>
<span><span class="va">burials</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.table</a></span><span class="op">(</span><span class="va">path</span>, header <span class="op">=</span> <span class="cn">TRUE</span>, sep <span class="op">=</span> <span class="st">","</span>, dec <span class="op">=</span> <span class="st">"."</span>,</span>
<span>                      check.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Coerce to event</span></span>
<span><span class="va">burials</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/as_events.html">as_events</a></span><span class="op">(</span><span class="va">burials</span>, calendar <span class="op">=</span> <span class="fu"><a href="https://packages.tesselle.org/aion/reference/gregorian.html" class="external-link">CE</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>First, we check for the expected result of the identity relation by
comparing an interval with itself.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Identify the burials with bead BE1-Dghnt</span></span>
<span><span class="va">be1_dghnt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"UB-4503 (Lec148)"</span>, <span class="st">"UB-4506 (Lec172/2)"</span>, <span class="st">"UB-6038 (CasD183)"</span>,</span>
<span>  <span class="st">"UB-4512 (EH091)"</span>, <span class="st">"UB-4501 (Lec014)"</span>, <span class="st">"UB-4507 (Lec187)"</span>,</span>
<span>  <span class="st">"UB-4502 (Lec138)"</span>, <span class="st">"UB-4042 (But1674)"</span>, <span class="st">"SUERC-39100 (ERL G266)"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Build phases</span></span>
<span><span class="va">chains</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"BE1-Dghnt"</span> <span class="op">=</span> <span class="va">be1_dghnt</span><span class="op">)</span></span>
<span><span class="va">be1_dghnt_phase</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/phases.html">phases</a></span><span class="op">(</span><span class="va">burials</span>, groups <span class="op">=</span> <span class="va">chains</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Plot</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/allen_observe.html">allen_observe</a></span><span class="op">(</span><span class="va">be1_dghnt_phase</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="figures%2Fidentity_relation-1.png" alt="plot of chunk identity_relation" width="100%"><p class="caption">
plot of chunk identity_relation
</p>
</div>
<p>Next we compare the depositional histories of two bead types
recovered from well-dated Anglo Saxon female burials in England. Note
that the Allen relation and its converse are calculated.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Identify the burials with bead BE1-CylRound</span></span>
<span><span class="va">be1_cylround</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"UB-4965 (ApD117)"</span>, <span class="st">"UB-4735 (Ber022)"</span>, <span class="st">"UB-4739 (Ber134/1)"</span>,</span>
<span>  <span class="st">"UB-6473 (BuD250)"</span>, <span class="st">"UB-6476 (BuD339)"</span>, <span class="st">"UB-4729 (MH068)"</span>,</span>
<span>  <span class="st">"UB-4835 (ApD134)"</span>, <span class="st">"UB-4708 (EH083)"</span>, <span class="st">"UB-4733 (MH095)"</span>,</span>
<span>  <span class="st">"UB-4888 (MelSG089)"</span>, <span class="st">"UB-4963 (SPTip208)"</span>, <span class="st">"UB-4890 (MelSG075)"</span>,</span>
<span>  <span class="st">"UB-4732 (MH094)"</span>, <span class="st">"SUERC-51539 (ERL G353)"</span>, <span class="st">"SUERC-51551 (ERL G193)"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Build phases</span></span>
<span><span class="va">chains</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"BE1-Dghnt"</span> <span class="op">=</span> <span class="va">be1_dghnt</span>, <span class="st">"BE1-CylRound"</span> <span class="op">=</span> <span class="va">be1_cylround</span><span class="op">)</span></span>
<span><span class="va">be1_phase</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/phases.html">phases</a></span><span class="op">(</span><span class="va">burials</span>, groups <span class="op">=</span> <span class="va">chains</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Plot phase</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">6</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">be1_phase</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="figures%2Frelation_and_converse-1.png" alt="plot of chunk relation_and_converse" width="100%"><p class="caption">
plot of chunk relation_and_converse
</p>
</div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co">## Plot relations</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/allen_observe.html">allen_observe</a></span><span class="op">(</span><span class="va">be1_phase</span>, converse <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="figures%2Frelation_and_converse-2.png" alt="plot of chunk relation_and_converse" width="100%"><p class="caption">
plot of chunk relation_and_converse
</p>
</div>
<p>It can be useful to observe the frequency with which two intervals
are related according to the relations in an Allen set. For instance, we
might be interested in which of our two beads might be the trunk from
which the other branched. This can be done by observing the frequency
with which each bead type is related as <em>row(oFD)col</em> to the
other bead. The following code shows that BE1-CylRound is the better
trunk candidate.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/allen_observe_frequency.html">allen_observe_frequency</a></span><span class="op">(</span><span class="va">be1_phase</span>, set <span class="op">=</span> <span class="st">"oFD"</span><span class="op">)</span></span>
<span><span class="co">#&gt;              BE1-Dghnt BE1-CylRound</span></span>
<span><span class="co">#&gt; BE1-Dghnt           NA            0</span></span>
<span><span class="co">#&gt; BE1-CylRound    0.9962           NA</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-allen1983" class="csl-entry">
Allen, James F. 1983. <span>“Maintaining Knowledge about Temporal
Intervals.”</span> <em>Communications of the ACM</em> 26 (11): 832–43.
<a href="https://doi.org/10.1145/182.358434" class="external-link">https://doi.org/10.1145/182.358434</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Anne Philippe, Marie-Anne Vibet, Nicolas Frerebeau.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
